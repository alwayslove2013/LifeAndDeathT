(function(t){function a(a){for(var s,r,_=a[0],l=a[1],n=a[2],c=0,h=[];c<_.length;c++)r=_[c],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);o&&o(a);while(h.length)h.shift()();return d.push.apply(d,n||[]),e()}function e(){for(var t,a=0;a<d.length;a++){for(var e=d[a],s=!0,_=1;_<e.length;_++){var l=e[_];0!==i[l]&&(s=!1)}s&&(d.splice(a--,1),t=r(r.s=e[0]))}return t}var s={},i={app:0},d=[];function r(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=s,r.d=function(t,a,e){r.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,a){if(1&a&&(t=r(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)r.d(e,s,function(a){return t[a]}.bind(null,s));return e},r.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},r.p="";var _=window["webpackJsonp"]=window["webpackJsonp"]||[],l=_.push.bind(_);_.push=a,_=_.slice();for(var n=0;n<_.length;n++)a(_[n]);var o=l;d.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},2395:function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("div",{attrs:{id:"min_div"}},[e("life-and-death-tencent")],1)])},d=[],r=e("5698"),_=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"container"}},[t._m(0),e("div",{attrs:{id:"total"}},[e("div",{staticClass:"title"},[t._v("各地区累计治愈/死亡病例数（"+t._s(t.date_list[t.select_date_id]?t.date_list[t.select_date_id].month:"")+"月"+t._s(t.date_list[t.select_date_id]?t.date_list[t.select_date_id].day:"")+"日）")]),t._m(1),e("div",{attrs:{id:"total_svg_div"}},[e("svg",{attrs:{id:"total_svg",width:"100%",height:"100%"}},[e("g",{staticClass:"label_line"},t._l(t.total_x_label[t.select_date_id],(function(a,s){return e("path",{key:a+""+s,staticClass:"total_label_line",attrs:{d:s===t.total_x_label[t.select_date_id].length-1?"M"+(t.total_x_begin+(s+.5)*t.total_x_step)+",5v"+.8*t.total_svg_height:"M"+(t.total_x_begin+s*t.total_x_step)+",5v"+.8*t.total_svg_height}})})),0),e("g",{staticClass:"x_label",style:"transform: translate("+t.total_x_begin+"px, "+t.total_svg_height+"px);"},[t._l(t.total_x_label[t.select_date_id],(function(a,s){return e("text",{key:a+""+s,staticClass:"label_text",style:"transform: translate("+(s===t.total_x_label[t.select_date_id].length-1?t.total_x_step*(s+.5):t.total_x_step*s)+"px, -5px)"},[t._v(t._s(t.num2text(a)))])})),e("text",{staticClass:"label_text",style:"transform: translate("+t.total_x_step*(t.total_x_label[t.select_date_id].length-2.5)+"px, -5px);"},[t._v("//")])],2),t._l(t.total_dataset[t.select_date_id],(function(a,s){return e("g",{key:a.title_1,style:"transform: translate(0, "+.4*t.total_svg_height*s+"px);"},[e("text",{staticStyle:{transform:"translate(2vw, 4vw)"},attrs:{"font-size":"3.2vw","font-weight":"500"}},[t._v(t._s(a.title_1))]),e("text",{staticStyle:{transform:"translate(1.2vw, 7vw)"},attrs:{"font-size":"2.1333vw",fill:"#888888"}},[t._v(t._s(a.title_2))]),e("rect",{staticClass:"diagnosis",attrs:{x:t.total_x_begin,y:"1.3vw",width:t.total_bar_width(a.diagnosis),height:"3vw"}}),e("text",{staticClass:"bar_text",style:"transform: translate("+(t.total_x_begin+1)+"px, 3.5vw);"},[t._v(t._s(t.num2text(a.diagnosis)))]),e("rect",{staticClass:"cure",attrs:{x:t.total_x_begin,y:"4.3vw",width:t.total_bar_width(a.cure),height:"3vw"}}),e("text",{staticClass:"bar_text",style:"transform: translate("+(t.total_x_begin+1)+"px, 6.6vw);"},[t._v(t._s(t.num2text(a.cure)))]),e("rect",{staticClass:"death",attrs:{x:t.total_x_begin+t.total_bar_width(a.cure),y:"4.3vw",width:t.total_bar_width(a.death),height:"3vw"}}),e("text",{staticClass:"bar_text",style:(a.death/t.total_x_label[t.select_date_id][5]<.18?"text-anchor: end; ":"")+" transform: translate("+(a.death/t.total_x_label[t.select_date_id][5]>.18?t.total_x_begin+t.total_bar_width(a.cure)+1:t.total_x_begin+t.total_bar_width(a.cure)+t.total_bar_width(a.death)-1)+"px, 6.6vw);",attrs:{transform:t.isiOS?"translate("+(a.death/t.total_x_label[t.select_date_id][5]>.18?t.total_x_begin+t.total_bar_width(a.cure)+1:t.total_x_begin+t.total_bar_width(a.cure)+t.total_bar_width(a.death)-1)+"px, 6.6vw)":""}},[t._v(t._s(t.num2text(a.death)))]),e("g",{style:"transform: translate("+(t.total_x_begin+t.total_x_step*(t.total_x_label[t.select_date_id].length-2.8))+"px, -0.5vw) scale("+t.total_svg_width/800+")",attrs:{id:"页面1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[e("g",{attrs:{id:"手机",transform:"translate(-528.000000, -748.000000)",fill:"#FFFFFF"}},[e("g",{attrs:{id:"编组-35",transform:"translate(34.000000, 71.000000)"}},[e("g",{attrs:{id:"编组-36",transform:"translate(0.000000, 585.000000)"}},[e("g",{attrs:{id:"编组-26",transform:"translate(490.000000, 86.000000)"}},[e("g",{attrs:{id:"编组-25",transform:"translate(0.490312, 0.597389)"}},[e("g",{attrs:{id:"编组-24",transform:"translate(28.424015, 26.671522) rotate(23.000000) translate(-28.424015, -26.671522) translate(13.924015, 4.171522)"}},[e("g",{attrs:{id:"编组-22"}},[e("g",{attrs:{id:"编组-21"}},[e("g",{attrs:{id:"编组-20"}},[e("polygon",{attrs:{id:"路径-11",points:"13.9266941 1.26121336e-13 1.11910481e-13 8.64947511 14.1532193 16.1404361 28.3064386 8.64947511"}}),e("polygon",{attrs:{id:"路径-11",points:"13.9266941 7.05592105 -1.17239551e-13 15.7053962 14.1532193 23.1963572 28.3064386 15.7053962"}}),e("polygon",{attrs:{id:"路径-11",points:"13.9266941 21.1677632 -1.17239551e-13 29.8172383 14.1532193 37.3081993 28.3064386 29.8172383"}})]),e("polygon",{attrs:{id:"路径-11",points:"13.9266941 14.1118421 -1.17239551e-13 22.7613172 14.1532193 30.2522782 28.3064386 22.7613172"}})]),e("polygon",{attrs:{id:"路径-11",points:"13.9266941 28.2236842 1.10134124e-13 36.8731593 14.1532193 44.3641203 28.3064386 36.8731593"}})]),e("g",{attrs:{id:"路径-13",transform:"translate(0.000000, 21.167763)"}},[e("polygon",{attrs:{id:"路径-11",points:"13.9266941 1.26121336e-13 -1.17239551e-13 8.64947511 14.1532193 16.1404361 28.3064386 8.64947511"}})])]),e("g",{attrs:{id:"路径-12",transform:"translate(17.226836, 51.766822) rotate(23.000000) translate(-17.226836, -51.766822) translate(2.726836, 43.766822)"}},[e("polygon",{attrs:{id:"路径-11",points:"13.9266941 1.26121336e-13 -1.17239551e-13 8.53714427 14.1532193 15.9308201 28.3064386 8.53714427"}})])]),e("g",{attrs:{id:"路径-12",transform:"translate(19.825299, 46.693229) rotate(23.000000) translate(-19.825299, -46.693229) translate(5.325299, 38.693229)"}},[e("polygon",{attrs:{id:"路径-11",points:"13.9266941 1.26121336e-13 -1.17239551e-13 8.53714427 14.1532193 15.9308201 28.3064386 8.53714427"}})])])])])])])])}))],2)]),e("div",{staticClass:"description"},[t._v("*锯齿线用于数据差异过大时隔断坐标轴")])]),e("div",{staticStyle:{"margin-top":"6.67vw"},attrs:{id:"add"}},[e("div",{staticClass:"title"},[t._v("全国新增治愈/死亡病例数")]),t._m(2),e("div",{staticClass:"life_div"},[e("div",{staticClass:"y_label"},t._l(t.add_y_label,(function(a,s){return e("div",{key:a+"-"+s,style:"margin-bottom: "+(0===s?14.8:3.8)+"vw; font-weight: "+(0===a?600:400)+";"},[t._v(t._s(t.num2text(a))+t._s(0===s?"%":""))])})),0),e("div",{staticClass:"life_svg_div"},[e("div",{staticClass:"highlight_svg_div",staticStyle:{"pointer-events":"none"}},[e("svg",{attrs:{width:"100%",height:"100%"}},[e("defs",[e("linearGradient",{attrs:{id:"orange_red",x1:"100%",y1:"0%",x2:"100%",y2:"100%"}},[e("stop",{staticStyle:{"stop-color":"rgb(0, 186, 209)","stop-opacity":"0.05"},attrs:{offset:"0%"}}),e("stop",{staticStyle:{"stop-color":"rgb(0, 186, 209)","stop-opacity":"0.25"},attrs:{offset:"100%"}})],1)],1),e("rect",{attrs:{x:t.hightlight_rect.x,y:t.hightlight_rect.y,width:t.hightlight_rect.width,height:t.hightlight_rect.height,fill:"url(#orange_red)"}})])]),e("div",{staticClass:"life_svg_div_big",style:"height: 100%; width: "+t.dataLens/t.showLens*100+"%"},[e("svg",{staticStyle:{background:"none"},attrs:{width:"100%",height:"100%"}},[e("g",{attrs:{id:"horizontal_line"}},t._l(t.add_y_label,(function(a,s){return e("path",{key:"add_y_line"+s,style:"stroke-width: "+(t.bold_line_index_list.includes(s)?.3:.08)+"vw; stroke: #6f6f6f;",attrs:{d:t.bold_line_index_list.includes(s)?"":"M0,"+(0===s?.5*t.add_y_step:(s+2)*t.add_y_step)+"h"+t.add_svg_width}})})),0),e("g",{attrs:{id:"line-chart"}},[e("path",{staticStyle:{stroke:"#62c298","stroke-width":"0.2vw",fill:"none"},attrs:{d:t.cure_rect_path,"stroke-dasharray":"3 3"}}),e("path",{staticStyle:{fill:"rgba(121, 192, 155, 0.14)"},attrs:{d:""===t.cure_rect_path?"":t.cure_rect_path+"L"+t.add_x_step*(2*t.country_dataset.length-1)+","+3*t.add_y_step+"H"+t.add_x_step}}),t._l(t.country_dataset,(function(a,s){return e("rect",{key:"line-chart-cure-rect-"+s,staticClass:"cure line_rect",attrs:{x:t.add_x_step*(2*s+1-.18),y:.5*t.add_y_step+(t.add_y_label[0]-100*a.cure_rate)/t.add_y_label[0]*t.add_y_step*2.5-.18*t.add_x_step,width:.36*t.add_x_step,height:.36*t.add_x_step,rx:.06*t.add_x_step,ry:.06*t.add_x_step}})})),e("path",{staticStyle:{stroke:"#333333","stroke-width":"0.2vw",fill:"none"},attrs:{d:t.death_rect_path,"stroke-dasharray":"3 3"}}),e("path",{staticStyle:{fill:"rgba(51, 51, 51, 0.1)"},attrs:{d:""===t.cure_rect_path?"":t.death_rect_path+"L"+t.add_x_step*(2*t.country_dataset.length-1)+","+3*t.add_y_step+"H"+t.add_x_step}}),t._l(t.country_dataset,(function(a,s){return e("rect",{key:"line-chart-death-rect-"+s,staticClass:"death line_rect",attrs:{x:t.add_x_step*(2*s+1-.18),y:.5*t.add_y_step+(t.add_y_label[0]-100*a.death_rate)/t.add_y_label[0]*t.add_y_step*2.5-.18*t.add_x_step,width:.36*t.add_x_step,height:.36*t.add_x_step,rx:.06*t.add_x_step,ry:.06*t.add_x_step}})}))],2),e("g",{attrs:{id:"line-char-highlight"}},[e("text",{staticClass:"label_text",attrs:{x:t.add_x_step*(2*t.select_date_id+1),y:t.country_dataset[t.select_date_id]?.5*t.add_y_step+(t.add_y_label[0]-100*t.country_dataset[t.select_date_id].death_rate)/t.add_y_label[0]*t.add_y_step*2.5+.4*t.add_y_step:0}},[t._v(t._s(t.country_dataset[t.select_date_id]?(100*t.country_dataset[t.select_date_id].death_rate).toFixed(1)+"%":""))]),e("text",{staticClass:"label_text",attrs:{x:t.add_x_step*(2*t.select_date_id+1),y:t.country_dataset[t.select_date_id]?.5*t.add_y_step+(t.add_y_label[0]-100*t.country_dataset[t.select_date_id].cure_rate)/t.add_y_label[0]*t.add_y_step*2.5-.2*t.add_y_step:0}},[t._v(t._s(t.country_dataset[t.select_date_id]?(100*t.country_dataset[t.select_date_id].cure_rate).toFixed(1)+"%":""))])]),e("g",{attrs:{id:"bar-chart"}},[e("g",{attrs:{id:"bar-chart-cure"}},[t._l(t.country_dataset,(function(a,s){return e("rect",{key:"bar-rect-cure-"+s,staticClass:"cure",attrs:{width:t.add_x_step,height:a.cure/t.add_y_label[2]*t.add_y_step*2,x:t.add_x_step*(2*s+.5),y:(1-a.cure/t.add_y_label[2])*t.add_y_step*2+4*t.add_y_step}})})),t._l(t.country_dataset,(function(a,s){return e("text",{key:"bar-label-cure-"+s,staticClass:"label_text",attrs:{x:t.add_x_step*(2*s+1),y:(1-a.cure/t.add_y_label[2])*t.add_y_step*2+3.9*t.add_y_step}},[t._v(t._s(t.num2text(a.cure)))])}))],2),e("g",{attrs:{id:"bar-chart-death"}},[t._l(t.country_dataset,(function(a,s){return e("rect",{key:"bar-rect-death-"+s,staticClass:"death",attrs:{width:t.add_x_step,height:a.death/t.add_y_label[7]*t.add_y_step*2,x:t.add_x_step*(2*s+.5),y:7*t.add_y_step}})})),t._l(t.country_dataset,(function(a,s){return e("text",{key:"bar-label-death-"+s,staticClass:"label_text",attrs:{x:t.add_x_step*(2*s+1),y:a.death/t.add_y_label[7]*t.add_y_step*2+7.35*t.add_y_step}},[t._v(t._s(t.num2text(a.death)))])}))],2)]),e("g",{attrs:{id:"horizontal_line"}},t._l(t.add_y_label,(function(a,s){return e("path",{key:"add_y_line"+s,style:"stroke-width: "+(t.bold_line_index_list.includes(s)?.3:.08)+"vw; stroke: #6f6f6f;",attrs:{d:t.bold_line_index_list.includes(s)?"M0,"+(0===s?.5*t.add_y_step:(s+2)*t.add_y_step)+"h"+t.add_svg_width:""}})})),0),e("g",{attrs:{id:"x-label"}},t._l(t.date_list,(function(a,s){return e("text",{key:a.month+"-"+a.day,style:s===t.select_date_id?"text-anchor: middle; font-size: 2.4vw; font-weight: 500; fill: '#333333'; transform: translate(0, 0.1vw); transition: ease 0.2s;":"text-anchor: middle; font-size: 2.1333333vw; font-weight: 400; fill: '#333333';",attrs:{x:t.add_x_step*(2*s+1),y:6.6*t.add_y_step}},[t._v(t._s(a.month+"/"+a.day))])})),0)])])])]),e("div",{attrs:{id:"slider"}},[e("svg",{attrs:{id:"slider_svg",width:"100%",height:"100%"}},[e("defs",[e("linearGradient",{attrs:{id:"slider_linear"}},[e("stop",{staticStyle:{"stop-color":"#60cad7","stop-opacity":"1"},attrs:{offset:"15%"}}),e("stop",{staticStyle:{"stop-color":"#00bad1","stop-opacity":"1"},attrs:{offset:"95%"}})],1),e("filter",{attrs:{id:"shadow",x:"-5%",y:"0%",width:"110%",height:"120%"}},[e("feDropShadow",{attrs:{dx:"0",dy:"0.6",stdDeviation:"1.2","flood-color":"#00B9D1","flood-opacity":"0.6"}})],1)],1)])]),e("div",{staticClass:"description",staticStyle:{"margin-left":"3vw","margin-bottom":"5vw"}},[t._v("*拖动图表查看更多时间范围数据，移动滑块选择日期，图表将同步变化")])])])},l=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"head"}},[e("div",{attrs:{id:"left_border"}}),e("div",{attrs:{id:"title"}},[t._v("新冠肺炎疫情生命线")]),e("div",{attrs:{id:"description"}},[t._v("(7:00-10:00左右为数据更新高峰，显示可能略有滞后请谅解)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"legend"}},[e("div",{staticClass:"legend_part"},[e("div",{staticClass:"death icon"}),e("div",{staticClass:"legend_text"},[t._v("累计死亡")])]),e("div",{staticClass:"legend_part"},[e("div",{staticClass:"cure icon"}),e("div",{staticClass:"legend_text"},[t._v("累计治愈")])]),e("div",{staticClass:"legend_part"},[e("div",{staticClass:"diagnosis icon"}),e("div",{staticClass:"legend_text"},[t._v("累计确诊")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"legend"}},[e("div",{staticClass:"legend_part"},[e("div",{staticClass:"death icon"}),e("div",{staticClass:"legend_text"},[t._v("死亡人数")])]),e("div",{staticClass:"legend_part"},[e("div",{staticClass:"cure icon"}),e("div",{staticClass:"legend_text"},[t._v("治愈人数")])]),e("div",{staticClass:"legend_part"},[e("div",{staticClass:"icon_line_death"}),e("div",{staticClass:"death icon_line"}),e("div",{staticClass:"legend_text"},[t._v("死亡率")])]),e("div",{staticClass:"legend_part"},[e("div",{staticClass:"icon_line_cure"}),e("div",{staticClass:"cure icon_line"}),e("div",{staticClass:"legend_text"},[t._v("治愈率")])])])}],n=(e("99af"),e("4160"),e("a15b"),e("a434"),e("d3b7"),e("ac1f"),e("3ca3"),e("466d"),e("1276"),e("159b"),e("ddb0"),e("96cf"),e("1da1")),o=e("1157"),c=e.n(o),h={name:"life-line-phone",data:function(){return{wuhan_dataset:[],hubei_dataset:[],country_dataset:[],total_dataset:[],date_list:[],select_date_id:0,select_date_id_bar:0,select_date_id_slider:0,total_x_label:[[0,200,400,600,800,1e3,7e3,1e4]],total_x_begin:0,total_x_step:0,total_svg_width:0,total_svg_height:0,test:0,test2:0,dataViewWidth:0,dataLens:20,showLens:10,add_y_label:[],add_svg_width:0,add_svg_height:0,add_y_step:0,add_x_step:0,add_x_end:0,max_scroll_distance:0,gap:0,hightlight_rect:{},bold_line_index_list:[0,1,4,5],scroll_left:0,isiOS:0}},watch:{select_date_id_slider:function(){if(r["f"](".highlight_svg_div").node()){var t=r["f"](".highlight_svg_div").node().getBoundingClientRect(),a=t.width,e=2.6*this.add_x_step,s=8.5*this.add_y_step,i=a-this.add_x_end-e/2-2*(this.showLens-1-this.select_date_id_slider)*this.add_x_step-1*this.add_x_step,d=.5*this.add_y_step;this.hightlight_rect={x:i,y:d,width:e,height:s}}}},computed:{cure_rect_path:function(){var t=this,a="";return this.country_dataset.forEach((function(e,s){a+=0===s?"M":"L";var i=t.add_x_step*(2*s+1),d=.5*t.add_y_step+(t.add_y_label[0]-100*e.cure_rate)/t.add_y_label[0]*2.5*t.add_y_step;a+="".concat(i,",").concat(d)})),a},death_rect_path:function(){var t=this,a="";return this.country_dataset.forEach((function(e,s){a+=0===s?"M":"L";var i=t.add_x_step*(2*s+1),d=.5*t.add_y_step+(t.add_y_label[0]-100*e.death_rate)/t.add_y_label[0]*2.5*t.add_y_step;a+="".concat(i,",").concat(d)})),a}},methods:{total_bar_width:function(t){var a=this.total_x_label[this.select_date_id];if(t>=a[a.length-2]){var e=t-a[a.length-2],s=a[a.length-1]-a[a.length-2],i=1.5*this.total_x_step,d=e/s*i;return d+this.total_x_step*(a.length-2)}return t/a[a.length-3]*this.total_x_step*(a.length-3)},num2text:function(t){var a="";if(0===t)return"0";var e=0;while(t>0)3==e&&(a+=",",e=0),a+=t%10,t=parseInt(t/10),e++;return a.split("").reverse().join("")},set_total_svg_params:function(){var t=r["f"]("#total_svg_div").node().getBoundingClientRect();this.total_svg_width=t.width,this.total_svg_height=t.height,this.total_x_begin=.12*this.total_svg_width,this.total_x_step=(t.width-this.total_x_begin)/(this.total_x_label[0]?this.total_x_label[0].length:1)},set_add_svg_params:function(){var t=r["f"](".life_svg_div").node().getBoundingClientRect(),a=r["f"](".life_svg_div_big").node().getBoundingClientRect();this.add_svg_width=t.width*this.dataLens/this.showLens,this.add_svg_height=a.height,this.add_y_step=this.add_svg_height/9.5,this.add_x_step=this.add_svg_width/2/(this.dataLens+.2),this.add_x_end=this.add_svg_width-2*this.dataLens*this.add_x_step},compute_total_x_label:function(t){var a=[];t.forEach((function(t){var e=0,s=0,i=99999999;t.forEach((function(t){t.diagnosis>e&&(e=t.diagnosis),t.diagnosis<i&&(i=t.diagnosis);var a=t.cure+t.death;a>s&&(s=a)})),s=s>500?1e3*Math.ceil(s/1e3):500,e=e<1e4?1e3*Math.ceil(e/1e3):1e4*Math.ceil(e/1e4),s>i&&(i=Math.max(1e3*Math.ceil(s/1e3),e-1e4)),s<i&&(i=i>1e3?1e3*Math.floor(i/1e3):500),s===i&&(s+=1e3,i=Math.max(1e3*Math.ceil(s/1e3),e-1e4)),e=Math.max(e,i);for(var d=[0],r=1;r<=5;r++)d.push(s/5*r);d.push(i,e),a.push(d)})),this.total_x_label=a},compute_add_y_label:function(){var t=0,a=0,e=0;this.country_dataset.forEach((function(s){t<s.cure_rate&&(t=s.cure_rate),t<s.death_rate&&(t=s.death_rate),a<s.cure&&(a=s.cure),e<s.death&&(e=s.death)})),t=5*Math.ceil(100*t/5),a=400*Math.ceil(a/400),e=400*Math.ceil(e/400),this.add_y_label=[t,0,a,a/2,0,0,e/2,e]},initData_pku:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e,s,i,d,_,l,n,o,c,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e="https://tanshaocong.github.io/2019-nCoV/map.csv",a.next=3,r["a"](e);case 3:s=a.sent,i=10,d=1,_=[],s.forEach((function(t){if("国家级"===t["类别"]){var a=t["公开时间"].split("月")[0],e=t["公开时间"].split("日")[0].split("月")[1];if(a>d||a==d&&e>=i){_.push({cure:t["新增治愈出院数"]?+t["新增治愈出院数"]:0,death:t["新增死亡数"]?+t["新增死亡数"]:0,diagnosis:t["新增确诊病例"]?+t["新增确诊病例"]:0,hejian:t["核减"]?+t["核减"]:0,month:a,day:e});var s=_.length;_[s-1]["total_cure"]=s>1?_[s-2]["total_cure"]:0,_[s-1]["total_cure"]+=_[s-1]["cure"],_[s-1]["total_death"]=s>1?_[s-2]["total_death"]:0,_[s-1]["total_death"]+=_[s-1]["death"],_[s-1]["total_diagnosis"]=s>1?_[s-2]["total_diagnosis"]:0,_[s-1]["total_diagnosis"]+=_[s-1]["diagnosis"]+_[s-1]["hejian"],_[s-1]["cure_rate"]=_[s-1]["total_cure"]/_[s-1]["total_diagnosis"],_[s-1]["death_rate"]=_[s-1]["total_death"]/_[s-1]["total_diagnosis"]}}})),l=[],s.forEach((function(t){if("省级"===t["类别"]&&"湖北"===t["省份"]){var a=t["公开时间"].split("月")[0],e=t["公开时间"].split("日")[0].split("月")[1];if(a>d||a==d&&e>=i){l.push({cure:t["新增治愈出院数"]?+t["新增治愈出院数"]:0,death:t["新增死亡数"]?+t["新增死亡数"]:0,diagnosis:t["新增确诊病例"]?+t["新增确诊病例"]:0,hejian:t["核减"]?+t["核减"]:0,month:a,day:e});var s=l.length;l[s-1]["total_cure"]=s>1?l[s-2]["total_cure"]:0,l[s-1]["total_cure"]+=l[s-1]["cure"],l[s-1]["total_death"]=s>1?l[s-2]["total_death"]:0,l[s-1]["total_death"]+=l[s-1]["death"],l[s-1]["total_diagnosis"]=s>1?l[s-2]["total_diagnosis"]:0,l[s-1]["total_diagnosis"]+=l[s-1]["diagnosis"]+l[s-1]["hejian"]}}})),n=[],s.forEach((function(t){if("地区级"===t["类别"]&&"湖北"===t["省份"]&&"武汉"===t["城市"]){var a=t["公开时间"].split("月")[0],e=t["公开时间"].split("日")[0].split("月")[1];if(a>d||a==d&&e>=i){n.push({cure:t["新增治愈出院数"]?+t["新增治愈出院数"]:0,death:t["新增死亡数"]?+t["新增死亡数"]:0,diagnosis:t["新增确诊病例"]?+t["新增确诊病例"]:0,hejian:t["核减"]?+t["核减"]:0,month:a,day:e});var s=n.length;n[s-1]["total_cure"]=s>1?n[s-2]["total_cure"]:0,n[s-1]["total_cure"]+=n[s-1]["cure"],n[s-1]["total_death"]=s>1?n[s-2]["total_death"]:0,n[s-1]["total_death"]+=n[s-1]["death"],n[s-1]["total_diagnosis"]=s>1?n[s-2]["total_diagnosis"]:0,n[s-1]["total_diagnosis"]+=n[s-1]["diagnosis"]+n[s-1]["hejian"]}}})),o=t.dataLens,t.wuhan_dataset=n.splice(n.length-o,o),t.hubei_dataset=l.splice(l.length-o,o),t.country_dataset=_.splice(_.length-o,o),c=[],t.country_dataset.forEach((function(a,e){var s=t.wuhan_dataset[e],i=t.hubei_dataset[e],d={title_1:"武汉",title_2:"",death:s["total_death"],cure:s["total_cure"],diagnosis:s["total_diagnosis"]},r={title_1:"湖北",title_2:"(除武汉)",death:i["total_death"]-s["total_death"],cure:i["total_cure"]-s["total_cure"],diagnosis:i["total_diagnosis"]-s["total_diagnosis"]},_={title_1:"全国",title_2:"(除湖北)",death:a["total_death"]-i["total_death"],cure:a["total_cure"]-i["total_cure"],diagnosis:a["total_diagnosis"]-i["total_diagnosis"]};c.push([d,r,_])})),t.total_dataset=c,t.compute_total_x_label(c),t.compute_add_y_label(),h=[],t.country_dataset.forEach((function(t){h.push({month:t.month,day:t.day})})),t.date_list=h,t.select_date_id=h.length-1,t.set_total_svg_params(),t.set_add_svg_params();case 27:case"end":return a.stop()}}),a)})))()},getCountryDataset:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:21;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i,d,_,l,n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i={args:{req:{none:""}},service:"THOuterDataServer",func:"getAreaInfo"},d={method:"POST",headers:[["Content-Type","application/json"]],body:JSON.stringify(i)},s.next=4,r["d"](t,d);case 4:return _=s.sent,l=_.args.rsp,n=[],l.chinaHistoryTotal.forEach((function(t){var s=+t["day"].split(".")[1],i=+t["day"].split(".")[0];(i>a||i==a&&s>=e)&&n.push({total_cure:t.heal,total_death:t.dead,total_diagnosis:t.confirm,cure_rate:t.heal/t.confirm,death_rate:t.dead/t.confirm,month:i,day:s})})),o=0,l.modifyHistoryTotal.forEach((function(t){var s=+t["day"].split(".")[1],i=+t["day"].split(".")[0];(i>a||i==a&&s>=e)&&(n[o]["cure"]=t.heal,n[o]["death"]=t.dead,o++)})),s.abrupt("return",n);case 11:case"end":return s.stop()}}),s)})))()},getHubeiDataset:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i,d,_,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i={args:{req:{area:"湖北"}},service:"THOuterDataServer",func:"getCityInfo"},d={method:"POST",headers:[["Content-Type","application/json"]],body:JSON.stringify(i)},s.next=4,r["d"](t,d);case 4:return _=s.sent,l=[],_.args.rsp.areaHistory.forEach((function(t){var s=+t["day"].split(".")[1],i=+t["day"].split(".")[0];(i>a||i==a&&s>=e)&&l.push({total_cure:t.heal,total_death:t.dead,total_diagnosis:t.confirm,month:i,day:s})})),s.abrupt("return",l);case 8:case"end":return s.stop()}}),s)})))()},getWuhanDataset:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i,d,_,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i={args:{req:{area:"湖北"}},service:"THOuterDataServer",func:"getKeyCity"},d={method:"POST",headers:[["Content-Type","application/json"]],body:JSON.stringify(i)},s.next=4,r["d"](t,d);case 4:return _=s.sent,l=[],_.args.rsp.cityHistory[0].history.forEach((function(t){var s=+t["day"].split(".")[1],i=+t["day"].split(".")[0];(i>a||i==a&&s>=e)&&l.push({total_cure:t.heal,total_death:t.dead,total_diagnosis:t.confirm})})),s.abrupt("return",l);case 8:case"end":return s.stop()}}),s)})))()},getTotalDatatest:function(t,a){var e=[];return t.forEach((function(t,s){var i=a[s],d={title_1:"湖北",title_2:"",death:i["total_death"],cure:i["total_cure"],diagnosis:i["total_diagnosis"]},r={title_1:"全国",title_2:"(除湖北)",death:t["total_death"]-i["total_death"],cure:t["total_cure"]-i["total_cure"],diagnosis:t["total_diagnosis"]-i["total_diagnosis"]};e.push([d,r])})),e},initData_tencent:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e="https://ehcard-test.wecity.qq.com/api",s="https://wechat.wecity.qq.com/api",i=a?e:s;Promise.all([this.getCountryDataset(i),this.getHubeiDataset(i)]).then((function(a){t.dataLens=Math.min(a[0].length,a[1].length);var e=0,s=0,i=a[1][a[1].length-1],d=a[0][a[0].length-1];i.day-d.day===1&&(s=1),i.day-d.day===-1&&(e=1);var _=a[0].splice(a[0].length-t.dataLens-e,t.dataLens);t.country_dataset=_;var l=a[1].splice(a[1].length-t.dataLens-s,t.dataLens),n=t.getTotalDatatest(_,l);t.total_dataset=n,t.compute_total_x_label(n),t.compute_add_y_label();var o=[];t.country_dataset.forEach((function(t){o.push({month:t.month,day:t.day})})),t.date_list=o,t.select_date_id=o.length-1,t.set_total_svg_params(),t.set_add_svg_params(),t.set_slider(),t.set_scroll_by_addEvent(),t.dataViewWidth=r["f"](".life_svg_div").node().getBoundingClientRect().width}))},set_scroll_by_addEvent:function(){var t=this,a=null;document.querySelector(".life_svg_div").addEventListener("scroll",(function(e){if(!t.isiOS){t.scroll_left=e.target.scrollLeft,clearTimeout(a);var s=t.scroll_left;t.max_scroll_distance=-t.dataViewWidth+t.add_svg_width,t.gap=Math.min(t.max_scroll_distance,Math.max(t.max_scroll_distance-s,0));var i=Math.round(t.gap/(2*t.add_x_step));t.select_date_id_bar=t.dataLens-t.showLens-i,t.select_date_id=t.select_date_id_bar+t.select_date_id_slider,a=setTimeout((function(a){if(a===t.scroll_left){t.max_scroll_distance=-t.dataViewWidth+t.add_svg_width,t.gap=Math.min(t.max_scroll_distance,Math.max(t.max_scroll_distance-a,0));var s=Math.round(t.gap/(2*t.add_x_step)),i=t.max_scroll_distance-s*(2*t.add_x_step);e.target.scrollLeft=i}}),100,s)}if(t.isiOS){t.scroll_left=e.target.scrollLeft+e.target.scrollWidth-e.target.clientWidth,clearTimeout(a);var d=t.scroll_left;t.max_scroll_distance=-t.dataViewWidth+t.add_svg_width,t.gap=Math.min(t.max_scroll_distance,Math.max(t.max_scroll_distance-d,0));var r=Math.round(t.gap/(2*t.add_x_step));t.select_date_id_bar=t.dataLens-t.showLens-r,t.select_date_id=t.select_date_id_bar+t.select_date_id_slider,a=setTimeout((function(a){if(a===t.scroll_left){t.max_scroll_distance=-t.dataViewWidth+t.add_svg_width,t.gap=Math.min(t.max_scroll_distance,Math.max(t.max_scroll_distance-a,0));var s=Math.round(t.gap/(2*t.add_x_step)),i=t.max_scroll_distance-s*(2*t.add_x_step);e.target.scrollLeft=i-e.target.scrollWidth+e.target.clientWidth}}),100,d)}}))},set_scroll_by_jquery:function(){var t=this,a=null;c()(".life_svg_div").scroll((function(){var e=this;clearTimeout(a),t.scroll_left=this.scrollLeft;var s=this.scrollLeft;t.max_scroll_distance=-t.dataViewWidth+t.add_svg_width,t.gap=t.max_scroll_distance-s;var i=Math.round(t.gap/(2*t.add_x_step));t.select_date_id_bar=t.dataLens-t.showLens-i,t.select_date_id=t.select_date_id_bar+t.select_date_id_slider,a=setTimeout((function(a){if(a===t.scroll_left){t.max_scroll_distance=-t.dataViewWidth+t.add_svg_width,t.gap=t.max_scroll_distance-a;var s=Math.round(t.gap/(2*t.add_x_step)),i=t.max_scroll_distance-s*(2*t.add_x_step);e.scrollLeft=i}}),100,s)}))},set_slider:function(){var t=this,a=r["f"]("#slider").node().getBoundingClientRect().width,e=r["f"]("#slider").node().getBoundingClientRect().height,s={left:.03*a,right:.05*a,top:0,bottom:0},i=function(i,d){var _=r["f"]("#".concat(i));_.attr("height",e).attr("width",a);var l=_.append("g").attr("transform","translate(".concat(s.left,", ").concat(s.top,")")),n=a-s.left-s.right,o=e-s.top-s.bottom,c=n/d,h=.8*o,u=r["e"]().range([-.2*c,n-1.2*c]).domain([0,d-1]),g=l.append("g");g.append("line").attr("x1",.02*-n).attr("x2",n+.22*c).attr("y1",.5*o).attr("y2",.5*o).style("stroke","#ececec").style("stroke-width",.2*o).style("stroke-linecap","round");var p=g.append("g"),f=[0,1,2];p.append("rect").attr("x",c*d-1.2*c).attr("y",o/2-.25*h).attr("width",1.4*c).attr("height",.75*h).attr("class","bar_g").attr("rx",.12*c).attr("ry",.12*c).classed("slider-rect-shadow",!0);var v=g.append("rect").attr("x",c*d-1.2*c).attr("y",o/2-h/2).attr("width",1.4*c).attr("height",h).attr("rx",.12*c).attr("ry",.12*c).classed("slider-rect",!0);g.append("g").selectAll("rect").data(f).enter().append("rect").attr("class","bar_g").attr("x",(function(t,a){return c*d-1.2*c+.43*c+.25*a*c})).attr("y",o/2-.23*h).attr("width",.04*c).attr("height",.46*h).style("fill","#ffffff").attr("rx",.02*c).attr("ry",.02*c),v.call(r["b"]().on("drag",(function(){var a=Math.min(Math.max(-.2*c,r["c"].x),n-1.2*c),e=r["f"](this);e.attr("x",a);var s=Math.round(u.invert(a)),i=s*c-.2*c;e.attr("x",i),r["g"](".bar_g").attr("transform","translate(".concat((s-d+1)*c,", 0)")),t.select_date_id_slider=s,t.select_date_id=t.select_date_id_slider+t.select_date_id_bar})).on("end",(function(){})))};this.select_date_id_slider=this.showLens-1;var d="slider_svg";i(d,this.showLens),this.select_date_id_bar=this.dataLens-this.showLens}},mounted:function(){this.initData_tencent(),/(iPhone|iPad|iPod|iOS|Mac)/i.test(navigator.userAgent)&&(/Safari/.test(navigator.userAgent)&&/Chrome/.test(navigator.userAgent)?this.isiOS=0:this.isiOS=1);var t=navigator.userAgent,a=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);a&&(this.isiOS=1)}},u=h,g=(e("8a7c"),e("2877")),p=Object(g["a"])(u,_,l,!1,null,null,null),f=p.exports,v={name:"app",components:{LifeAndDeathTencent:f},data:function(){return{}},mounted:function(){var t=navigator.userAgent.toLowerCase(),a="Roboto, SourceHanSansCN, “思源黑体”, Noto Sans SC";/\(i[^;]+;( U;)? CPU.+Mac OS X/gi.test(t)&&(a="PingFang SC"),r["f"]("body").style("font-family",a)}},y=v,x=(e("7c55"),Object(g["a"])(y,i,d,!1,null,null,null)),b=x.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(b)}}).$mount("#app")},"7c55":function(t,a,e){"use strict";var s=e("2395"),i=e.n(s);i.a},"8a7c":function(t,a,e){"use strict";var s=e("dfd9"),i=e.n(s);i.a},dfd9:function(t,a,e){}});
//# sourceMappingURL=app.218b65e7.js.map